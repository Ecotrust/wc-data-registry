wc-data-registry
================

Data Registry for the West Coast Governors Alliance

Quick Start
===========
Install Jekyll site generator (may need to install ruby and gem first):

```
gem install jekyll
```

Install Bower package manager (may need to install node and npm first):

```
npm install -g bower
```
    
Install Grunt task runner:

```
sudo npm install -g grunt-cli
```

Clone this repository if you haven't already and cd into the top-level directory.

Install dev dependencies into node_modules directory:

```
npm install
```

Install frontend Javascript libraries into bower_components:

```
bower install
``` 

(Optionally) Run tests

First implement the following workaround fix - http://stackoverflow.com/questions/24270389/angularjs-controller-unit-test-with-jasmine. In _includes/bower_components/angular-mocks/angular-mocks.js find the function isSpecRunning and change it as follows:

```
function isSpecRunning() {
  //return currentSpec && (window.mocha || currentSpec.queue.running);
  return !!currentSpec;
}
```

Now run the test suite

```
grunt test
```

Compile development versions of JS/CSS and start serving the WCODP app, watching for any file changes and recompiling automatically:

```
jekyll serve --watch
```

Now view the app in your browser at http://127.0.0.1:4000

To reduce the size of the JS and CSS files (minify/uglify), getting them ready for staging and production, run the following:

```
grunt
```

### Compiling LESS to CSS
You should not make changes directly to site_raw/_includes/css/main.css.  This stylesheet is generated by the LESS compiler.  You shoule make edits to site_raw/_includes/less/main.less and then run:

```
less site_raw/_includes/less/main.less site_raw/_includes/css/main.css
```